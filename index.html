<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>KML Map Viewer v2.0</title>

  <!-- 原 v1.9.6 CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Leaflet -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  />
</head>

<body>

  <!-- ===== 標題 ===== -->
  <div id="title">
    KML 地圖系統 v2.0
    <button id="editButton">編輯</button>
  </div>

  <!-- ===== 控制區 ===== -->
  <div id="controls">

    <!-- 搜尋 -->
    <div id="searchContainer">
      <span class="material-symbols-outlined">search</span>
      <input id="searchBox" type="text" placeholder="搜尋點位…" />
      <div id="searchResults"></div>
    </div>

    <!-- KML 選擇 -->
    <select id="kmlLayerSelect">
      <option value="">-- 請選擇 KML 圖層 --</option>
    </select>

    <!-- pin -->
    <button id="pinButton" class="pin-button-icon" disabled>
      <img class="pin-icon" src="https://cdn-icons-png.flaticon.com/512/484/484167.png" />
    </button>

  </div>

  <!-- ===== 地圖 ===== -->
  <div id="map"></div>

  <!-- ===== 認證 / 編輯面板 ===== -->
  <div id="authSection">

    <!-- 登入 -->
    <form id="loginForm">
      <button id="googleSignInBtn" type="button">Google 登入</button>
      <div id="loginMessage"></div>
    </form>

    <!-- 已登入 -->
    <div id="loggedInDashboard">
      <div id="userEmailDisplay"></div>

      <div id="kmlControlsDashboard">

        <!-- 上傳 -->
        <div id="uploadKmlSectionDashboard">
          <label>上傳 KML</label>
          <span id="selectedKmlFileNameDashboard">尚未選擇檔案</span>
          <button id="uploadKmlSubmitBtnDashboard" disabled>上傳</button>
        </div>

        <!-- ===== v2.0 START：清查切換 ===== -->
        <button
          id="inspectionToggleBtn"
          class="admin-option-button inspection-off"
        >
          清查（關閉中）
        </button>
        <!-- ===== v2.0 END ===== -->

        <!-- 刪除（原本 v1.9.6） -->
        <div id="deleteKmlSectionDashboard">
          <label>刪除 KML</label>
          <select id="kmlLayerSelectDashboard"></select>
          <button id="deleteSelectedKmlBtn" disabled>刪除</button>
        </div>

      </div>
    </div>
  </div>

  <!-- ===== v2.0 START：清查 Modal ===== -->
  <div id="inspectionModalOverlay" class="confirmation-modal-overlay">
    <div class="confirmation-modal-content">
      <h3 id="inspectionModalTitle">點號</h3>

      <div class="button-group">
        <button id="inspectionSubmitBtn" class="action-buttons">
          送出
        </button>
        <button
          id="inspectionCancelBtn"
          class="action-buttons"
          style="background-color:#6c757d;"
        >
          取消
        </button>
      </div>
    </div>
  </div>
  <!-- ===== v2.0 END ===== -->

  <!-- 原 v1.9.6 JS -->
  <script src="firebase-init.js"></script>
  <script src="auth-kml-management.js"></script>
  <script src="map-logic.js"></script>
  <script src="ui-interactions.js"></script>

  <!-- ===== v2.0 START ===== -->
  <script src="inspection.js"></script>
  <!-- ===== v2.0 END ===== -->

</body>
</html>
